# ğŸ”§ å•ä½ç»Ÿè®¡æ˜¾ç¤ºé—®é¢˜è°ƒè¯•æŒ‡å—

## é—®é¢˜ç°çŠ¶
æ‚¨æä¾›çš„æ•°æ®ç»“æ„å®Œå…¨æ­£ç¡®ï¼š
```json
{
  "unit_statistics": {
    "available": true,
    "covered_units": 3,
    "units": [
      {"unit_name": "æ¹–å—", "region": "åä¸­", "recruitment_count": 92, "percentage": 44.02},
      {"unit_name": "å†€åŒ—åšæœ›", "region": "æœªçŸ¥", "recruitment_count": 77, "percentage": 36.84},
      {"unit_name": "ç”˜è‚ƒ", "region": "è¥¿åŒ—", "recruitment_count": 40, "percentage": 19.14}
    ]
  }
}
```

**é¢„æœŸæ˜¾ç¤ºç»“æœï¼š**
- è¦†ç›–äºŒçº§å•ä½ï¼š`3`
- å›¾è¡¨æ ‡é¢˜ï¼š`"äºŒçº§å•ä½åˆ†å¸ƒ"`
- å›¾è¡¨æ˜¾ç¤ºï¼š3ä¸ªå•ä½çš„æŸ±çŠ¶å›¾

## ğŸ” è°ƒè¯•æ­¥éª¤

### ç¬¬1æ­¥ï¼šæ£€æŸ¥ç½‘ç»œè¯·æ±‚
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
2. åˆ‡æ¢åˆ° Network æ ‡ç­¾é¡µ
3. åœ¨æ•°æ®æŸ¥ä¸€ç‚¹é€šä¸­æ‰§è¡ŒæŸ¥è¯¢
4. æŸ¥æ‰¾ `/api/v1/data-search/search` è¯·æ±‚
5. ç¡®è®¤å“åº”æ•°æ®åŒ…å«æ­£ç¡®çš„ `unit_statistics` å­—æ®µ

### ç¬¬2æ­¥ï¼šæ£€æŸ¥å‰ç«¯æ•°æ®æ¥æ”¶
æˆ‘å·²ç»åœ¨ DataAnalytics.vue ä¸­æ·»åŠ äº†è°ƒè¯•ä¿¡æ¯ã€‚è¯·ï¼š

1. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å° (F12 â†’ Console)
2. åœ¨æ•°æ®æŸ¥ä¸€ç‚¹é€šä¸­æ‰§è¡ŒæŸ¥è¯¢
3. æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼Œåº”è¯¥èƒ½çœ‹åˆ°ï¼š
   ```
   ğŸ” DataAnalytics - Computing secondaryUnitsCount
   ğŸ” props.data: {...}
   ğŸ” unit_statistics: {...}
   âœ… Using covered_units: 3
   ```

### ç¬¬3æ­¥ï¼šæ£€æŸ¥å›¾è¡¨æ¸²æŸ“
ç»§ç»­åœ¨æ§åˆ¶å°æŸ¥çœ‹ï¼š
```
ğŸ” DataAnalytics - initRegionChart called
ğŸ“Š unit_statistics data: {...}
ğŸ“Š Processing units: [...]
ğŸ“Š Final chart data: [...]
```

## ğŸš¨ å¸¸è§é—®é¢˜è¯Šæ–­

### æƒ…å†µ1ï¼šæ§åˆ¶å°æ²¡æœ‰ä»»ä½•è°ƒè¯•ä¿¡æ¯
**åŸå› **ï¼šDataAnalytics ç»„ä»¶æ²¡æœ‰è¢«æ¸²æŸ“æˆ–æ•°æ®æ²¡æœ‰ä¼ é€’åˆ°ç»„ä»¶
**è§£å†³**ï¼š
- æ£€æŸ¥çˆ¶ç»„ä»¶æ˜¯å¦æ­£ç¡®ä¼ é€’äº† `data` å±æ€§
- ç¡®è®¤ç»„ä»¶æ˜¯å¦åœ¨ `loading` çŠ¶æ€

### æƒ…å†µ2ï¼šæ§åˆ¶å°æ˜¾ç¤º `props.data: null` æˆ– `undefined`
**åŸå› **ï¼šæ•°æ®æ²¡æœ‰æ­£ç¡®ä»APIä¼ é€’åˆ°ç»„ä»¶
**è§£å†³**ï¼š
- æ£€æŸ¥ API è°ƒç”¨æ˜¯å¦æˆåŠŸ
- æ£€æŸ¥ recruitment.ts ä¸­çš„æ•°æ®é€‚é…é€»è¾‘
- ç¡®è®¤çˆ¶ç»„ä»¶çš„æ•°æ®ä¼ é€’

### æƒ…å†µ3ï¼šæ˜¾ç¤º `unit_statistics: undefined`
**åŸå› **ï¼šAPIé€‚é…å±‚æ²¡æœ‰æ­£ç¡®æ˜ å°„æ•°æ®
**è§£å†³**ï¼š
- æ£€æŸ¥ `recruitment.ts:276` è¡Œçš„æ•°æ®æ˜ å°„
- ç¡®è®¤åç«¯å“åº”åŒ…å« `unit_statistics` å­—æ®µ

### æƒ…å†µ4ï¼šæ˜¾ç¤ºæ—§çš„ company_distribution æ•°æ®
**åŸå› **ï¼šè¿›å…¥äº†å…œåº•é€»è¾‘ï¼Œæ²¡æœ‰ä½¿ç”¨æ–°çš„ unit_statistics
**è§£å†³**ï¼š
- ç¡®è®¤ `unit_statistics.units` æ•°ç»„ä¸ä¸ºç©º
- æ£€æŸ¥æ•°æ®ç»“æ„æ˜¯å¦å®Œæ•´

## ğŸ› ï¸ ç«‹å³å¯ç”¨çš„è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä¸´æ—¶æ˜¾ç¤ºæ•°æ®ï¼ˆéªŒè¯ç»„ä»¶åŠŸèƒ½ï¼‰
åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æ‰§è¡Œï¼š
```javascript
// æ‰¾åˆ° DataAnalytics ç»„ä»¶å®ä¾‹
const app = document.querySelector('#app').__vue_app__
// æ‰‹åŠ¨è§¦å‘æ•°æ®æ›´æ–°ï¼ˆéœ€è¦æ ¹æ®å®é™…åº”ç”¨ç»“æ„è°ƒæ•´ï¼‰
```

### æ–¹æ¡ˆ2ï¼šç›´æ¥æ£€æŸ¥ç»„ä»¶çŠ¶æ€
åœ¨ DataAnalytics.vue çš„ template ä¸­ä¸´æ—¶æ·»åŠ è°ƒè¯•ä¿¡æ¯ï¼š
```vue
<div style="background: red; color: white; padding: 10px;">
  DEBUG: {{ secondaryUnitsCount }} | {{ regionChartTitle }}
</div>
```

## ğŸ“‹ å¿«é€Ÿæ£€æŸ¥æ¸…å•

- [ ] API å“åº”åŒ…å« `unit_statistics` å­—æ®µ
- [ ] `unit_statistics.available = true`
- [ ] `unit_statistics.covered_units = 3`
- [ ] `unit_statistics.units` æ•°ç»„åŒ…å«3ä¸ªå…ƒç´ 
- [ ] æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯
- [ ] DataAnalytics ç»„ä»¶æ­£ç¡®æ¥æ”¶åˆ° props.data
- [ ] ç»„ä»¶çš„ computed å±æ€§æ­£ç¡®è®¡ç®—
- [ ] ECharts å›¾è¡¨æ­£ç¡®åˆå§‹åŒ–

## ğŸ”§ è°ƒè¯•å·¥å…·

æˆ‘å·²ç»åˆ›å»ºäº†ä»¥ä¸‹å·¥å…·å¸®åŠ©æ‚¨ï¼š

1. **debug-unit-statistics.html** - ç¦»çº¿æ•°æ®ç»“æ„éªŒè¯å·¥å…·
2. **test-data-flow-verification.html** - å®Œæ•´æ•°æ®æµæµ‹è¯•
3. **æ·»åŠ åˆ°ç»„ä»¶ä¸­çš„ console.log** - å®æ—¶è°ƒè¯•ä¿¡æ¯

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³æ“ä½œ**ï¼šæ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼Œæ‰§è¡ŒæŸ¥è¯¢ï¼ŒæŸ¥çœ‹è°ƒè¯•ä¿¡æ¯
2. **å¦‚æœæ²¡æœ‰è°ƒè¯•ä¿¡æ¯**ï¼šé—®é¢˜åœ¨ç»„ä»¶æ¸²æŸ“æˆ–æ•°æ®ä¼ é€’
3. **å¦‚æœæœ‰è°ƒè¯•ä¿¡æ¯ä½†æ˜¾ç¤ºä¸æ­£ç¡®**ï¼šé—®é¢˜åœ¨è®¡ç®—é€»è¾‘æˆ–æ¸²æŸ“é€»è¾‘
4. **æä¾›è°ƒè¯•ä¿¡æ¯**ï¼šå°†æ§åˆ¶å°è¾“å‡ºå‘ç»™æˆ‘ï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥è¯Šæ–­

æ ¹æ®æ‚¨çš„æ•°æ®ç»“æ„ï¼Œè¿™åº”è¯¥æ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„ã€‚è®©æˆ‘ä»¬é€šè¿‡è°ƒè¯•ä¿¡æ¯æ‰¾å‡ºå…·ä½“é—®é¢˜æ‰€åœ¨ï¼